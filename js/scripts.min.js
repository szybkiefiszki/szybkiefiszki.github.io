var app=angular.module("cardsApp",["ui.router","ngAnimate"]);app.config(function(r,a){a.hashPrefix(""),r.state({name:"default",url:"/",templateUrl:"panel.htm"}).state({name:"list",url:"/list",templateUrl:"list.htm"}).state({name:"config",url:"/config",templateUrl:"config.htm"})}),app.service("storage",function(){this.saveCards=function(r){var a=[];return r.forEach(function(r){a.push(JSON.stringify(r))}),localStorage.setItem("fastCards",a.join("|")),!0},this.getCards=function(){var r="",a=[];return r=localStorage.getItem("fastCards"),""!=r&&null!=r||(r='{"question":"Gdzie urodził się Fryderyk Chopin?","answer":"Żelazowa Wola","active":true}|{"question":"W który roku zmarł Ludwig van Beethoven?","answer":"1827r."}|{"question":"W którym roku urodził się Wolfgang Amadeus Mozart?","answer":"1756r."}|{"question":"Gdzie umarł Johannes Brahms?","answer":"W Wiedniu"}|{"question":"W jakich latach żył Georg Friedrich Händel?","answer":"1685 - 1759"}'),r=r.split("|"),r.forEach(function(r){a.push(JSON.parse(r))}),a}}),app.directive("fileread",[function(){return{scope:{fileread:"="},link:function(r,a,e){a.bind("change",function(a){var e=new FileReader;e.onload=function(a){r.$apply(function(){r.fileread=a.target.result})},e.readAsDataURL(a.target.files[0])})}}}]),app.controller("cardsCtrl",function(r,a,e){var n=this;n.loader=!0,n.image=null,n.question="",n.answer="",n.notiSuccess=!1,n.notiWarning=!1,n.cards=e.getCards(),n.cards.forEach(function(r,a){r.hover=!1,1==r.active&&(n.currentCard=a)}),n.toggleHover=function(r){n.cards[r].hover?n.cards[r].hover=!1:n.cards[r].hover=!0},n.setPage=function(r){"home"==r?n.config=!1:n.config=!0},n.removeCard=function(r){n.cards[r].active&&(n.changeCard(r+1),n.changeCard(r-1)),r<=n.currentCard&&n.currentCard--,n.cards.splice(r,1)},n.addCard=function(){""!=n.question&&""!=n.answer?(n.cards.push({image:n.image,question:n.question,answer:n.answer}),1==n.cards.length&&(n.cards[0].active=!0,n.currentCard=0),n.image=null,n.question="",n.answer=""):n.notiWarning||(n.notiWarning=!0,a(function(){n.notiWarning=!1},3e3))},n.changeCard=function(r){r>=0&&r<n.cards.length&&(n.cards[n.currentCard].active=!1,n.currentCard=r,n.cards[n.currentCard].active=!0,n.cards.forEach(function(r){r.hover=!1}))},n.syncCards=function(){e.saveCards(n.cards)&&!n.notiSuccess&&(n.notiSuccess=!0,a(function(){n.notiSuccess=!1},3e3))}});